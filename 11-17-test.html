<!DOCTYPE <html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <link type="text/css" rel="stylesheet" href="main2.css">
    <meta https-equiv="X-UA-Compatible" content="ie=edge" />

</head>

<body>
    <div class="popoutImage" id="hass" style=" background-size:contain; background-image: url(css3d_periodictable1.jpg);"> 
    <button style="visibility: hidden; position: absolute; display: block; z-index: 20;" id="submitter" onclick="createLabel()">Enter</button>
        <script>
            var image = document.getElementById("hass");
            var count = 0
            var xMo = 0;
            var yMo = 0;
            hass.addEventListener('mouseup', function(e){
                var visTest = document.getElementById("submitter").style.visibility;
                if (visTest == "hidden"){
                    xMo = e.clientX;
                    yMo = e.clientY;
                    count++;
                    var input = document.createElement("input");
                    input.type = "text";
                    input.id = "input" + count;
                    basicElemSetup(input);
                    const parent = document.querySelector("body");
                    parent.appendChild(input);
                    submit();

                    var point = document.createElement("point");
                    basicElemSetup(point);
                    point.style.width = "10px";
                    point.style.height = "10px";
                    point.style.borderRadius = "2.5px";
                    point.style.backgroundColor = "red";
                    point.style.left = xMo-5;
                    point.style.top = yMo-5;
                    point.style.zIndex = 19;
                    parent.appendChild(point);
                }
            })

            function submit() {
                document.getElementById("submitter").style.left = xMo + 171;
                document.getElementById("submitter").style.top = yMo;
                document.getElementById("submitter").style.visibility = "visible";
            }

            function createLabel(){
                const newDiv = document.createElement("label" + count);
                newDiv.innerHTML = document.getElementById("input" + count).value;
                basicElemSetup(newDiv);
                newDiv.style.backgroundColor = "white";
                newDiv.style.color = "black";
                newDiv.style.border = "2px solid black"
                const parent = document.querySelector("body");
                parent.appendChild(newDiv);

                resetInput();
            }


            function basicElemSetup(elem){
                //for label, submitter, point
                elem.style.zIndex = 20;
                elem.style.position = 'absolute';
                elem.style.display = 'block';
                elem.style.left = xMo+100;
                elem.style.top = yMo+100;
            }

            function resetInput(){
                document.getElementById("submitter").style.visibility = "hidden";
                document.getElementById("submitter").style.left = "0";
                document.getElementById("submitter").style.top = "0";
                document.getElementById("input" + count).remove();
            }
        </script>	
    </div>

</body>
